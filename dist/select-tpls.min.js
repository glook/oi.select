"use strict";angular.module("oi.select",[]);var throttle=function(e,t,n){var o,r;return t||(t=250),function(){var i=n||this,l=+new Date,s=arguments;o&&l<o+t?(clearTimeout(r),r=setTimeout(function(){o=l,e.apply(i,s)},t)):(o=l,e.apply(i,s))}};angular.module("oi.select").provider("oiSelect",function(){return{options:{debounce:500,searchFilter:"oiSelectCloseIcon",dropdownFilter:"oiSelectHighlight",listFilter:"oiSelectAscSort",groupFilter:"oiSelectGroup",editItem:!1,newItem:!1,closeList:!0,saveTrigger:"enter tab blur",minlength:0},version:{full:"0.2.21",major:0,minor:2,dot:21},$get:function(){return{options:this.options,version:this.version}}}}).factory("oiSelectEscape",function(){var e=/[-\/\\^$*+?.()|[\]{}]/g;return function(t){return String(t).replace(e,"\\$&")}}).factory("oiSelectEditItem",function(){return function(e,t,n,o){return o?"":n(e)}}).factory("oiUtils",["$document","$timeout",function(e,t){function n(e,t,n){for(var o=t;o&&o.ownerDocument&&11!==o.nodeType;){if(n){if(o===e)return!1;if(o.className.indexOf(n)>=0)return!0}else if(o===e)return!0;o=o.parentNode}return!1}var o=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i");function r(e){var t,n,o=e.getBoundingClientRect(),r=e&&e.ownerDocument;if(r)return t=r.documentElement,n=function(e){return null!=e&&e===e.window?e:9===e.nodeType&&e.defaultView}(r),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}}return{contains:n,bindFocusBlur:function(o,r){var i,l,s;function a(e){e&&"INPUT"!==e.target.nodeName||(s=!1,i=!1,l?s=!0:t(function(){o.triggerHandler("blur")}))}function u(){i||(i=!0,t(function(){o.triggerHandler("focus")}))}function c(){l=!0}function p(e){l=!1;var u=e.target,c=n(o[0],u);s&&!c&&a(),c&&"INPUT"!==u.nodeName&&t(function(){r[0].focus()}),!c&&i&&(i=!1)}return e[0].addEventListener("click",p,!0),o[0].addEventListener("mousedown",c,!0),o[0].addEventListener("blur",a,!0),r.on("focus",u),function(){e[0].removeEventListener("click",p,!0),o[0].removeEventListener("mousedown",c,!0),o[0].removeEventListener("blur",a,!0),r.off("focus",u)}},scrollActiveOption:function(e,t){var n,i,l,s,a,u;t&&(i=e.offsetHeight,l=function(e,t,n){var r="width"===t?e.offsetWidth:e.offsetHeight,i=window.getComputedStyle(e,null);if(r<=0||null==r){if(((r=i[t])<0||null==r)&&(r=e.style[t]),o.test(r))return r;r=parseFloat(r)||0}return r+function(e,t,n,o,r){var i=n===(o?"border":"content")?4:"width"===t?1:0,l=0,s=["Top","Right","Bottom","Left"];function a(e){return parseFloat(r[e])}for(;i<4;i+=2)"margin"===n&&(l+=a(n+s[i])),o?("content"===n&&(l-=a("padding"+s[i])),"margin"!==n&&(l-=a("border"+s[i]+"Width"))):(l+=a("padding"+s[i]),"padding"!==n&&(l+=a("border"+s[i]+"Width")));return l}(0,t,n||"content",!0,i)}(t,"height","margin"),s=e.scrollTop||0,a=n=r(t).top-r(e).top+s,u=n-i+l,n+l>i+s?e.scrollTop=u:n<s&&(e.scrollTop=a))},groupsIsEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t].length)return!1;return!0},getValue:function(e,t,n,o){var r={};return e.split(".").reduce(function(e,n,o,r){return e[n]=o<r.length-1?{}:t},r),o(n,r)},intersection:function(e,t,n,o,r){var i,l,s,a,u,c=r?[].concat(e):[];for(i=0,s=e.length;i<e.length;i++)for(a=n?n(e[i]):e[i],l=0;l<t.length;l++)if(u=o?o(t[l]):t[l],angular.equals(a,u,e,t,i,l)){r?c.splice(i+c.length-s,1):c.push(t[l]);break}return c}}}]),angular.module("oi.select").directive("oiSelect",["$document","$q","$timeout","$parse","$interpolate","$injector","$filter","$animate","oiUtils","oiSelect",function(e,t,n,o,r,i,l,s,a,u){var c=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,p=/([^\(\)\s\|\s]*)\s*(\(.*\))?\s*(\|?\s*.+)?/;return{restrict:"AE",templateUrl:"src/template.html",require:"ngModel",scope:{},compile:function(e,m){var d=function(e){var t=e?e.match(c):["","i","","","","i","","",""];if(!t)throw new Error("Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_'");var n={match:t};return n.selectAsName=/ as /.test(t[0])&&t[1],n.displayName=t[2]||t[1],n.valueName=t[5]||t[7],n.keyName=t[6],n.groupByName=t[3]||"",n.disableWhenName=t[4]||"",n.trackByName=t[9]||n.displayName,n.valueMatches=t[8].match(p),n.valueTitle=n.valueName,n.keyTitle=n.keyName,n.keyName&&(n.valueName="i",n.selectAsName=n.valueName+"."+(n.selectAsName||n.valueTitle),n.trackByName=n.valueName+"."+n.keyName,n.displayName=n.valueName+"."+n.displayName,n.keyName=n.valueName+"."+n.keyName,n.groupByName=n.groupByName?n.valueName+"."+n.groupByName:void 0,n.disableWhenName=n.disableWhenName?n.valueName+"."+n.disableWhenName:void 0),n.valuesName=n.valueMatches[1],n.filteredValuesName=n.valuesName+(n.valueMatches[3]||""),n.valuesFnName=n.valuesName+(n.valueMatches[2]||""),n.selectAsFn=n.selectAsName&&o(n.selectAsName),n.displayFn=o(n.displayName),n.groupByFn=o(n.groupByName),n.disableWhenFn=o(n.disableWhenName),n.filteredValuesFn=o(n.filteredValuesName),n.valuesFn=o(n.valuesFnName),n.trackByFn=o(n.trackByName),n.multiplePlaceholderFn=r(m.multiplePlaceholder||""),n.listPlaceholderFn=r(m.listPlaceholder||""),n.placeholderFn=r(m.placeholder||""),n.optionsFn=o(m.oiSelectOptions),n.isOldAngular=angular.version.major<=1&&angular.version.minor<=3,n},h=function(e,t){return Object.keys(e).forEach(function(n){void 0!==t[n]&&Array.isArray(t[n])&&(e[n]=e[n].concat(t[n]))}),e},f={placeholderFn:r(""),listPlaceholderFn:r(""),multiplePlaceholderFn:r(""),optionsFn:function(){}},g={keyUpDownWerePressed:null,matchesWereReset:null,timeoutPromise:null,lastQuery:null,removedItem:null,multiple:null,multipleLimit:null,newItemFn:null,offsetTop:0,noMoreItems:!1,threshold:30,throttle:500};return function(e,r,p,m){m.$isEmpty=function(e){return!K(e)};var v=r.find("input"),y=angular.element(r[0].querySelector(".select-dropdown")),w=f.placeholderFn(e)||p.placeholder||"",$=f.multiplePlaceholderFn(e)||p.multiplePlaceholder||"",b=f.listPlaceholderFn(e),F=f.optionsFn(e.$parent)||{},N=angular.extend({cleanModel:"prompt"===F.newItem},u.options,F),I=N.editItem,k="correct"===I,L=0;!0!==I&&"correct"!==I||(I="oiSelectEditItem");var P=I?i.get(I):angular.noop,_=o(N.removeItemFn);f.match=N.searchFilter.split(":");var S=l(f.match[0]),E=o(f.match[1]);f.match=N.dropdownFilter.split(":");var A=l(f.match[0]),V=o(f.match[1]);f.match=N.listFilter.split(":");var q=l(f.match[0]),O=o(f.match[1]);f.match=N.groupFilter.split(":");var C=l(f.match[0]),T=o(f.match[1]);N.newItemFn?g.newItemFn=o(N.newItemFn):g.newItemFn=function(e,t){return(f.optionsFn(t)||{}).newItemModel||t.$query},!N.cleanModel||I&&!k||r.addClass("cleanMode");var D=a.bindFocusBlur(r,v);function x(){k&&r.removeClass("cleanMode"),k=!1}angular.isDefined(p.autofocus)&&n(function(){v[0].focus()}),angular.isDefined(p.tabindex)&&(v.attr("tabindex",p.tabindex),r[0].removeAttribute("tabindex")),N.maxlength&&v.attr("maxlength",N.maxlength),p.$observe("disabled",function(t){v.prop("disabled",t),g.multiple&&m.$modelValue&&m.$modelValue.length&&(e.inputHide=t)}),e.$on("$destroy",D),e.$parent.$watch(p.multipleLimit,function(e){g.multipleLimit=Number(e)||1/0}),e.$parent.$watch(p.multiple,function(e){g.multiple=void 0===e?angular.isDefined(p.multiple):e,r[g.multiple?"addClass":"removeClass"]("multiple")}),e.$parent.$watch(p.ngModel,function(n,o){var r,i=J(n),l=t.when(i);r=g.multiple&&K(m.$modelValue)?$:w,v.attr("placeholder",r),K(o)&&n!==o&&x(),g.multiple||U(),f.selectAsFn&&K(n)&&(l=Z(null,n).then(function(e){return a.intersection(i,e,null,G)}),g.timeoutPromise=null),g.multiple&&p.disabled&&!K(n)&&(e.inputHide=!1),l.then(function(t){e.output=t,t.length!==i.length&&e.removeItem(t.length)})}),e.$watch("query",function(t,n){R(t.slice(0,-1),t.slice(-1))||String(t).length<N.minlength||(t===n||e.oldQuery&&!t||g.matchesWereReset||(y[0].scrollTop=0,t?(Z(t),e.oldQuery=null):g.multiple&&(ee(),g.matchesWereReset=!0)),g.matchesWereReset=!1)}),e.$watch("groups",function(t){a.groupsIsEmpty(t)?e.isOpen=!1:e.isOpen||p.disabled||(e.isOpen=!0,e.isFocused=!0)}),e.$watch("isFocused",function(e){s[e?"addClass":"removeClass"](r,"focused",!f.isOldAngular&&{tempClasses:"focused-animate"})}),angular.isDefined(p.threshold)&&(isNaN(p.threshold)||(g.threshold=parseInt(p.threshold))),angular.isDefined(p.throttle)&&(isNaN(p.throttle)||(g.throttle=parseInt(p.throttle)));var H=function(e){setTimeout(function(){r[0].querySelector(".oi-select__dropdown").scrollTop=e},30)},W=throttle(function(t){var n=t.target;g.offsetTop=n.scrollTop,n.scrollTop+g.threshold+n.clientHeight>=n.scrollHeight&&(g.noMoreItems||Z(e.query,void 0,!0))},g.throttle);(e.$watch("isOpen",function(e){s[e?"addClass":"removeClass"](r,"open",!f.isOldAngular&&{tempClasses:"open-animate"}),e&&f.valuesFnName.match(/\$page/)&&setTimeout(function(){return r[0].addEventListener("scroll",W,!0)},100)}),e.$watch("isEmptyList",function(e){s[e?"addClass":"removeClass"](r,"emptyList",!f.isOldAngular&&{tempClasses:"emptyList-animate"})}),e.$watch("showLoader",function(e){s[e?"addClass":"removeClass"](r,"loading",!f.isOldAngular&&{tempClasses:"loading-animate"})}),angular.isDefined(p.readonly)&&e.$parent.$watch(p.readonly,function(e){void 0===e&&(e=!0),v.attr("readonly",e)}),angular.isDefined(p.oiOptions))&&(p.oiOptions.match(c)?f=d(p.oiOptions):e.$parent.$watch(p.oiOptions,function(e){f=d(e)}));function M(e,t){t=t||150,r.addClass(e),n(function(){r.removeClass(e)},t)}function B(){e.listItemHide=!0,e.inputHide=!1}function U(){var t=K(m.$modelValue);e.listItemHide=!t,e.inputHide=t}function Q(t){e.query.length<N.minlength||a.contains(r[0],t.target,"disabled")||e.output.length>=g.multipleLimit&&a.contains(r[0],t.target,"select-dropdown")||(e.inputHide&&e.removeItem(0),!e.isOpen||!N.closeList||"INPUT"===t.target.nodeName&&e.query.length?Z(e.query):(ee({query:N.editItem&&!k}),e.$evalAsync()))}function R(o,r){r||(r=o,o=e.query);var i=N.saveTrigger.split(" ").indexOf(r)+1,l=N.newItem&&o,s="blur"!==r?e.order[e.selectorPosition]:null;if(i&&(l||s&&!X(s)))return e.showLoader=!0,t.when(s||f.newItemFn(e.$parent,{$query:o})).then(function(o){if(void 0===o)return t.reject();e.addItem(o);var r=e.order.length-1;e.selectorPosition===r&&te(y,0),N.newItemFn&&!s||n(angular.noop),ee()}).catch(function(){M("invalid-item"),e.showLoader=!1}),!0}function j(t){return a.getValue(f.valueName,t,e.$parent,f.trackByFn)}function G(t){return a.getValue(f.valueName,t,e.$parent,f.selectAsFn)}function z(t){return a.getValue(f.valueName,t,e.$parent,f.displayFn)}function X(t){return e.isEmptyList||a.getValue(f.valueName,t,e.$parent,f.disableWhenFn)}function Y(t){return a.getValue(f.valueName,t,e.$parent,f.groupByFn)||""}function J(e){return(e=e instanceof Array?e:e?[e]:[]).filter(function(e){return void 0!==e&&(e instanceof Array&&e.length||f.selectAsFn||z(e))})}function K(e){return!!J(e).length}function Z(o,i){var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l?e.page++:e.page=0,e.isEmptyList=!1,g.timeoutPromise&&L&&n.cancel(g.timeoutPromise),g.timeoutPromise=n(function(){var s=f.valuesFn(e.$parent,{$query:o,$page:e.page,$selectedAs:i})||"";return e.selectorPosition="prompt"!==N.newItem&&0,o||i||(e.oldQuery=null),(s.$promise&&!s.$resolved||angular.isFunction(s.then))&&(L=N.debounce),e.showLoader=!0,t.when(s.$promise||s).then(function(t){if(l?t.length||(g.noMoreItems=!0):(e.groups={},g.noMoreItems=!1),t&&f.keyName){var n=[];angular.forEach(t,function(e,t){if("$"!==t.toString().charAt(0)){var o={};o[f.keyTitle]=t,o[f.valueTitle]=e,n.push(o)}}),t=n}if(t&&!i){var s=g.multiple?e.output:[],u=q(t,o,z,O(e.$parent),r),c=a.intersection(u,s,j,j,!0),p=(d=c,a.getValue(f.valuesName,d,e.$parent,f.filteredValuesFn));if(!p.length&&(e.isEmptyList=!0,b)){var m={};f.displayFn.assign(m,b),p=[m[f.valueName]]}l?(e.groups=h(e.groups,ne(p)),H(g.offsetTop)):e.groups=ne(p)}var d;return function(){var t,n,o,r=[],i=0;for(n in e.order=[],e.groupPos={},e.groups)e.groups.hasOwnProperty(n)&&"$"!==n.charAt(0)&&r.push(n);f.isOldAngular&&r.sort();for(t=0;t<r.length;t++)n=r[t],o=e.groups[n],e.order=e.order.concat(o),e.groupPos[n]=i,i+=o.length}(),t}).finally(function(){e.showLoader=!1,N.closeList&&!N.cleanModel&&n(function(){te(y,0)})})},L),g.timeoutPromise}function ee(t){t=t||{},e.oldQuery=null,e.backspaceFocus=!1,e.groups={},e.order=[],e.showLoader=!1,e.isOpen=!1,L=0,t.query||(e.query=""),g.timeoutPromise&&n.cancel(g.timeoutPromise)}function te(t,n){e.selectorPosition=n,a.scrollActiveOption(t[0],t.find("li")[n])}function ne(e){for(var t,n,o={"":[]},r=0;r<e.length;r++)(n=o[t=Y(e[r])])||(n=o[t]=[]),n.push(e[r]);return o}e.$parent.$watch(p.oiSelectOptions,function(e){N=angular.extend({cleanModel:"prompt"===F.newItem},u.options,e),I=N.editItem,k="correct"===I,L=0,!0!==I&&"correct"!==I||(I="oiSelectEditItem"),!0!==I&&"correct"!==I||(I="oiSelectEditItem"),P=I?i.get(I):angular.noop,_=o(N.removeItemFn),f.match=N.searchFilter.split(":"),S=l(f.match[0]),E=o(f.match[1]),f.match=N.dropdownFilter.split(":"),A=l(f.match[0]),V=o(f.match[1]),f.match=N.listFilter.split(":"),q=l(f.match[0]),O=o(f.match[1]),f.match=N.groupFilter.split(":"),C=l(f.match[0]),T=o(f.match[1]),N.newItemFn?g.newItemFn=o(N.newItemFn):g.newItemFn=function(e,t){return(f.optionsFn(t)||{}).newItemModel||t.$query}},!0),e.addItem=function(t){if(g.lastQuery=e.query,!g.multiple||!a.intersection(e.output,[t],j,j).length)if(e.output.length>=g.multipleLimit)M("limited");else{var n=e.groups[Y(t)]=e.groups[Y(t)]||[],o=f.selectAsFn?G(t):t;n.splice(n.indexOf(t),1),g.multiple?m.$setViewValue(angular.isArray(m.$modelValue)?m.$modelValue.concat(o):[o]):(m.$setViewValue(o),U()),a.groupsIsEmpty(e.groups)&&(e.groups={}),g.multiple||N.closeList||ee({query:!0}),x(),e.oldQuery=e.oldQuery||e.query,e.query="",e.backspaceFocus=!1}},e.removeItem=function(n){p.disabled||g.multiple&&n<0||(g.removedItem=g.multiple?m.$modelValue[n]:m.$modelValue,t.when(_(e.$parent,{$item:g.removedItem})).then(function(){(g.multiple||e.inputHide)&&(g.multiple?(m.$modelValue.splice(n,1),m.$setViewValue([].concat(m.$modelValue))):(B(),N.cleanModel&&m.$setViewValue(void 0)),!g.multiple&&e.backspaceFocus||(e.query=P(g.removedItem,g.lastQuery,z,k,r)||""),g.multiple&&N.closeList&&ee({query:!0}))}))},e.setSelection=function(t){g.keyUpDownWerePressed||e.selectorPosition===t?g.keyUpDownWerePressed=!1:te(y,t)},e.keyUp=function(t){switch(t.keyCode){case 8:e.query.length||g.multiple&&e.output.length||ee()}},e.keyDown=function(t){var n=e.order.length-1;switch(t.keyCode){case 38:e.selectorPosition=angular.isNumber(e.selectorPosition)?e.selectorPosition:0,te(y,0===e.selectorPosition?n:e.selectorPosition-1),g.keyUpDownWerePressed=!0;break;case 40:e.selectorPosition=angular.isNumber(e.selectorPosition)?e.selectorPosition:-1,te(y,e.selectorPosition===n?0:e.selectorPosition+1),g.keyUpDownWerePressed=!0,e.query.length||e.isOpen||Z(),e.inputHide&&B();break;case 37:case 39:break;case 9:R("tab");break;case 13:R("enter"),t.preventDefault();break;case 32:R("space");break;case 27:g.multiple||(U(),N.cleanModel&&m.$setViewValue(g.removedItem)),ee();break;case 8:if(!e.query.length){if(g.multiple&&!I||(e.backspaceFocus=!0),e.backspaceFocus&&e.output&&(!g.multiple||e.output.length)){e.removeItem(e.output.length-1),I&&t.preventDefault();break}e.backspaceFocus=!e.backspaceFocus;break}default:return e.inputHide&&B(),e.backspaceFocus=!1,!1}},e.getSearchLabel=function(t){var n=z(t);return S(n,e.oldQuery||e.query,t,E(e.$parent),r)},e.getDropdownLabel=function(t){var n=z(t);return A(n,e.oldQuery||e.query,t,V(e.$parent),r)},e.getGroupLabel=function(t,n){return C(t,e.oldQuery||e.query,n,T(e.$parent),r)},e.getDisableWhen=X,ee(),r[0].addEventListener("click",Q,!0),e.$on("$destroy",function(){r[0].removeEventListener("click",Q,!0)}),r.on("focus",function(t){if(e.isFocused)return;if(e.isFocused=!0,p.disabled)return;e.backspaceFocus=!1}),r.on("blur",function(t){e.isFocused=!1,g.multiple||U();R("blur")||ee();e.$evalAsync()})}}}}]),angular.module("oi.select").filter("oiSelectGroup",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]).filter("oiSelectCloseIcon",["$sce",function(e){return function(t){return e.trustAsHtml(t+'<span class="close select-search-list-item_selection-remove">Ã—</span>')}}]).filter("oiSelectHighlight",["$sce","oiSelectEscape",function(e,t){return function(n,o){var r;return o.length>0||angular.isNumber(o)?(n=n.toString(),o=t(o),r=n.replace(new RegExp(o,"gi"),"<strong>$&</strong>")):r=n,e.trustAsHtml(r)}}]).filter("oiSelectAscSort",["oiSelectEscape",function(e){return function(t,n,o,r){var i,l,s,a,u=[],c=[],p=[],m=[];if(n){for(n=e(n).toLocaleLowerCase(),i=0,s=!1;i<t.length;i++){if(!(s=o(t[i]).toLocaleLowerCase().match(new RegExp(n)))&&r&&(r.length||r.fields))for(l=0;l<r.length&&!s;l++)s=String(t[i][r[l]]).toLocaleLowerCase().match(new RegExp(n));s&&u.push(t[i])}for(i=0;i<u.length;i++)o(u[i]).toLocaleLowerCase().match(new RegExp("^"+n))?c.push(u[i]):p.push(u[i]);if(a=c.concat(p),r&&(!0===r||r.all)){e:for(i=0;i<t.length;i++){for(l=0;l<a.length;l++)if(t[i]===a[l])continue e;m.push(t[i])}a=a.concat(m)}}else a=[].concat(t);return a}}]).filter("none",function(){return function(e){return e}}),angular.module("oi.select").run(["$templateCache",function(e){e.put("src/template.html",'<div class="oi-select__search select-search"><ul class="select-search-list oi-select__search-list"><li class="select-search-list-item oi-select__search-list-item select-search-list-item_selection oi-select__search-list-item_selection" ng-hide=listItemHide ng-repeat="item in output track by $index" ng-class="{focused: backspaceFocus && $last}" ng-click=removeItem($index) ng-bind-html=getSearchLabel(item)></li><li class="select-search-list-item oi-select__search-list-item select-search-list-item_input oi-select__search-list-item_input" ng-class="{\'select-search-list-item_hide oi-select__search-list-item_hide\': inputHide}"><input autocomplete=off ng-model=query ng-keyup=keyUp($event) ng-keydown=keyDown($event)></li><li class="select-search-list-item oi-select__search-list-item select-search-list-item_loader oi-select__search-list-item_loader" ng-show=showLoader></li></ul></div><div class="oi-select__dropdown select-dropdown" ng-show=isOpen><ul ng-if=isOpen class="select-dropdown-optgroup oi-select__dropdown-optgroup" ng-repeat="(group, options) in groups"><div class="select-dropdown-optgroup-header oi-select__dropdown-optgroup-header" ng-if="group && options.length" ng-bind-html="getGroupLabel(group, options)"></div><li class="select-dropdown-optgroup-option oi-select__dropdown-optgroup-option" ng-init="isDisabled = getDisableWhen(option)" ng-repeat="option in options" ng-class="{\'active\': selectorPosition === groupPos[group] + $index, \'disabled\': isDisabled, \'ungroup\': !group}" ng-click="isDisabled || addItem(option)" ng-mouseenter="setSelection(groupPos[group] + $index)" ng-bind-html=getDropdownLabel(option)></li></ul></div>')}]);